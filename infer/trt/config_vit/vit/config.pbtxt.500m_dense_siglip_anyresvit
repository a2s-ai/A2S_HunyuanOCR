name: "vit"
backend: "python"
max_batch_size: 8
input [
{
    name: "INPUT_0"
    data_type: TYPE_UINT8
    dims: [ -1 ]
},
{
    name: "img_index"
    data_type: TYPE_INT32
    dims: [ 1 ]
    optional: true
},
{
    name: "data_mode"
    data_type: TYPE_INT32
    dims: [ 1 ]
    optional: true
},
{
    name: "input_resolution"
    data_type: TYPE_INT32
    dims: [ 2 ]
    optional: true
}
]

output [
{
    name: "OUTPUT_0"
    data_type: TYPE_FP32
    dims: [ 1, -1, 1280 ]
},
{
    name: "patch_num_width"
    data_type: TYPE_INT32
    dims: [ 1 ]
}
]

instance_group [
  {
    count: 1
    kind : KIND_CPU
  }
]

parameters {
  key: "vit_config"
  value: {
    string_value: "/dockerdata/chatgpt/tritonft/vit_config/anyresvit/config_siglip_2048.json"
  }
}

parameters {
  key: "vit_ckpt_path"
  value: {
    #string_value: "/dockerdata/Models/gpt_500M_mllm_xdrope/vit.pth"
    string_value: "/dockerdata/Models/gpt_500M_mllm_xdrop_v2/vit.pth"
  }
}

parameters {
  key: "resolution"
  value: {
    string_value: "-1"
  }
}

parameters {
  key: "patch"
  value: {
    string_value: "1"
  }
}

parameters {
  key: "use_mlp_perceive"
  value: {
    string_value: "0"
  }
}

parameters {
  key: "perceive_extra_mlp"
  value: {
    string_value: "0"
  }
}

parameters {
  key: "mlp_perceive_depth"
  value: {
    string_value: "2"
  }
}
parameters {
  key: "skip_cls_token"
  value: {
    string_value: "0"
  }
}

parameters {
  key: "pool_rate"
  value: {
    string_value: "2"
  }
}

parameters {
  key: "patch_version"
  value: {
    string_value: "NA"
  }
}

parameters {
  key: "data_type"
  value: {
    string_value: "bf16"
  }
}

parameters {
  key: "use_trt_vit"
  value: {
    string_value: "0"
  }
}

parameters {
  key: "use_layernorm"
  value: {
    string_value: "1"
  }
}

parameters {
  key: "layernorm_eps"
  value: {
    string_value: "1e-05"
  }
}

parameters {
  key: "resize_version"
  value: {
    string_value: "V1"
  }
}

